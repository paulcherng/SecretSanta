<!-- admin.html -->
<!DOCTYPE html>
<html>
<head>
    <title>抽籤後台</title>
</head>
<body>
    <h1>後台管理</h1>
    <div id="content">
        <label for="secret">請輸入管理密碼:</label>
        <input type="password" id="secret">
        <button onclick="login()">登入</button>
    </div>

    <script>
        const contentDiv = document.getElementById('content');
        let adminSecret = '';

        function login() {
            adminSecret = document.getElementById('secret').value;
            if (!adminSecret) {
                alert('請輸入密碼');
                return;
            }
            loadStatus();
        }

        async function loadStatus() {
            // 使用 GET /api/status?secret=密碼 來取得受保護的資料
            const response = await fetch(`/api/status?secret=${adminSecret}`);
            if (!response.ok) {
                alert('密碼錯誤或無法取得資料');
                return;
            }
            const data = await response.json();
            
            let html = '<h2>目前參與者列表</h2>';
            html += `<p>人數: ${data.count} / 8</p>`;
            html += '<table border="1" cellpadding="5"><tr><th>ID</th><th>名字</th><th>Email</th><th>組別</th><th>願望</th></tr>';
            data.participants.forEach(p => {
                html += `<tr><td>${p.id}</td><td>${p.name}</td><td>${p.email}</td><td>${p.group_id}</td><td>${p.wish}</td></tr>`;
            });
            html += '</table>';
            html += '<br><button onclick="startDraw()">開始抽籤</button>';
            
            contentDiv.innerHTML = html;
        }

        async function startDraw() {
            if (!confirm('確定要執行抽籤嗎？此動作無法復原！')) return;
            
            const button = contentDiv.querySelector('button');
            button.disabled = true;
            button.textContent = '抽籤中...';

            // 呼叫抽籤 API
            const response = await fetch(`/api/draw?secret=${adminSecret}`, { method: 'POST' });
            const result = await response.json();

            alert(result.message);
            button.disabled = false;
            button.textContent = '開始抽籤';
        }
    </script>
</body>
</html>
```你需要再額外建立一個 `api/status.js` 來提供後台頁面所需的資料。

### 如何發布？

1.  **註冊帳號:** 註冊一個 [Vercel](https://vercel.com) 和一個 [GitHub](https://github.com) 帳號。
2.  **建立專案:** 將以上這些檔案 (html, api/*.js) 放到一個資料夾。
3.  **上傳到 GitHub:** 將這個資料夾變成一個 GitHub Repository。
4.  **連結 Vercel:** 在 Vercel 上，選擇 "Import Project"，然後選擇你剛剛建立的 GitHub Repository。
5.  **設定環境變數:** 在 Vercel 專案的設定中，找到 "Environment Variables"，然後加入：
    *   `RESEND_API_KEY`: 你的 Resend API 金鑰。
    *   `ADMIN_SECRET`: 你自訂的管理員後台密碼。
6.  **設定儲存:** 在 Vercel 專案的 "Storage" 標籤頁，建立一個 KV Database 並連結到你的專案。
7.  **部署:** Vercel 會自動偵測到你的專案結構並部署。完成後，你就會得到一個公開的網址！

這個方案完美地繞過了自己管理伺服器和資料庫的麻煩，同時功能完整、安全，且在你的使用規模下是免費的。